import boto3

def lambda_handler(event, context):
    # AWS リージョンを指定
    aws_region = 'your-aws-region'

    # 削除するロググループとサブスクリプションの情報を指定
    log_groups = [
        {
            'logGroupName': 'log-group-1',
            'subscriptionFilterName': 'subscription-filter-1'
        },
        {
            'logGroupName': 'log-group-2',
            'subscriptionFilterName': 'subscription-filter-2'
        },
        {
            'logGroupName': 'log-group-3',
            'subscriptionFilterName': 'subscription-filter-3'
        }
    ]

    # CloudWatch Logs クライアントの初期化
    logs_client = boto3.client('logs', region_name=aws_region)

    for log_group_info in log_groups:
        log_group_name = log_group_info['logGroupName']
        subscription_filter_name = log_group_info['subscriptionFilterName']

        try:
            # サブスクリプションフィルタを削除
            logs_client.delete_subscription_filter(
                logGroupName=log_group_name,
                filterName=subscription_filter_name
            )
            print(f"Subscription filter '{subscription_filter_name}' deleted from log group '{log_group_name}'")

        except Exception as e:
            print(f"Error deleting subscription filter '{subscription_filter_name}' from log group '{log_group_name}': {str(e)}")

    return {
        'statusCode': 200,
        'body': 'Subscription filters deleted successfully!'
    }
