import boto3

def lambda_handler(event, context):
    # RDSインスタンスの識別子を指定します
    rds_instance_identifier = 'YOUR_RDS_INSTANCE_IDENTIFIER'

    # AWSリージョンを指定します
    region = 'us-east-1'  # インスタンスが存在するリージョンに合わせて変更してください

    # Boto3のRDSクライアントを作成します
    rds_client = boto3.client('rds', region_name=region)

    try:
        # RDSインスタンスを削除します
        response = rds_client.delete_db_instance(
            DBInstanceIdentifier=rds_instance_identifier,
            SkipFinalSnapshot=True  # 最終スナップショットを作成しない場合はTrueに設定
        )

        # 削除が正常に完了した場合
        return {
            'statusCode': 200,
            'body': f"RDSインスタンス {rds_instance_identifier} の削除が正常に完了しました。"
        }
    except Exception as e:
        # エラーメッセージを返します
        return {
            'statusCode': 500,
            'body': f"RDSインスタンス {rds_instance_identifier} の削除中にエラーが発生しました: {str(e)}"
        }
