import boto3
import os

def lambda_handler(event, context):
    # AWS Lambdaから提供されるIAMロールのアクセスキーとシークレットアクセスキーを使用
    rds_client = boto3.client('rds')

    # RDSインスタンスとRDSクラスターの識別子を設定
    instance_identifier = 'YOUR_INSTANCE_IDENTIFIER'
    cluster_identifier = 'YOUR_CLUSTER_IDENTIFIER'

    # RDSインスタンスの削除
    try:
        rds_client.delete_db_instance(
            DBInstanceIdentifier=instance_identifier,
            SkipFinalSnapshot=True
        )
        print(f"RDSインスタンス {instance_identifier} の削除が完了しました。")
    except Exception as e:
        print(f"RDSインスタンス {instance_identifier} の削除中にエラーが発生しました: {e}")

    # RDSクラスターの削除
    try:
        rds_client.delete_db_cluster(
            DBClusterIdentifier=cluster_identifier,
            SkipFinalSnapshot=True
        )
        print(f"RDSクラスター {cluster_identifier} の削除が完了しました。")
    except Exception as e:
        print(f"RDSクラスター {cluster_identifier} の削除中にエラーが発生しました: {e}")

    return {
        'statusCode': 200,
        'body': 'RDSインスタンスとRDSクラスターの削除が完了しました。'
    }
