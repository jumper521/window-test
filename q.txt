import boto3

ec2_client = boto3.client('ec2')

def get_instance_id_by_tag(tag_key, tag_value):
    response = ec2_client.describe_instances(
        Filters=[
            {
                'Name': f'tag:{tag_key}',
                'Values': [tag_value]
            }
        ]
    )

    if 'Reservations' in response:
        instances = response['Reservations']
        if instances:
            instance_ids = [instance['Instances'][0]['InstanceId'] for instance in instances]
            return instance_ids

    return []

# タグ名とタグ値を指定
tag_key = 'your-tag-key'
tag_value = 'your-tag-value'

# タグを使ってインスタンスIDを取得
instance_ids = get_instance_id_by_tag(tag_key, tag_value)

if instance_ids:
    for instance_id in instance_ids:
        print(f'インスタンスID: {instance_id}')
else:
    print('該当するインスタンスが見つかりませんでした。')
